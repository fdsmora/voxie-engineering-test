{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Team detail for "{{ team.name }}"{% endblock %}</h1>
{% endblock %}

{% block content %}
  <form method="post" action="{{ url_for('team_detail.update')  }}">
    <div>
        <input type="hidden" name="team_id" value="{{ team.id }}" />
        <label for="name">Name:</label>
        <span class="viewmode" name="name" id="lb_name">{{ team.name }}</span>
        <input class="editmode" name="name" id="txt_name" value="{{ team.name }}" >
        <a id="edit" class="viewmode" href="#!">Edit</a>
        <input class="editmode" type="submit" value="Save" />
        <a class="editmode" href="#!">Cancel</a>
    </div>
  </form>
    {% if team.contacts|length > 0 %}
        <table>
            <tr>
                <th>Name</th><th>Phone</th><th>Email</th><th>Has custom attributes</th>
            </tr>
           {% for contact in team.contacts %}
               <tr>
                   <td>{{ contact.name }}</td>
                   <td>{{ contact.phone }}</td>
                   <td>{{ contact.email }}</td>
                   <td>{% if contact.custom_attributes|length > 0 %} yes {% else %} no {% endif %}</td>
                   <td>
                       <a class="action" href="{{ url_for('contact_detail.edit', contact_id=contact.id) }}">See detail</a>
                       <a class="action" href="{{ url_for('contact_detail.delete', contact_id=contact.id) }}" onclick="return confirm('Are you sure you want to delete this team?')">Delete</a>
                   </td>      
               </tr>
           {% endfor %}
        </table>
    {% else %} 
       <label>Team has no contacts</label> 
    {% endif %}
    <a href="{{ url_for('view.view_teams')  }}" class="return">Back</a>
{% endblock %}
